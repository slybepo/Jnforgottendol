<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <script src="https://cdn.auth0.com/js/auth0-spa-js/1.19/auth0-spa-js.production.js"></script>
  <script src="auth.js"></script>
</head>
<body>
    <p id="login-status">Loading...</p>
  <button id="login-button" style="display:none;">Login / Register</button>
  <button id="logout-button">Logout</button>

  <script>
    window.addEventListener("load", async () => {
      await initializeAuth0();

      const isAuthenticated = await auth0.isAuthenticated();

      if (isAuthenticated) {
        document.getElementById("login-status").innerText = "You are logged in!";
        document.getElementById("logout-button").style.display = "block";
      } else {
        document.getElementById("login-status").innerText = "You are not logged in!";
        document.getElementById("login-button").style.display = "block";
      }

      document.getElementById("login-button").addEventListener("click", async () => {
        await auth0.loginWithRedirect({
          screen_hint: 'signup' // This opens the Universal Login on the Sign Up form
        });
      });

      document.getElementById("logout-button").addEventListener("click", () => {
        auth0.logout({ returnTo: window.location.origin });
      });
    });
  </script>
</body>
</html>
